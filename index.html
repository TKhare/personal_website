<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tejas Khare</title>
  <style>
    /* Minimal visuals for the effect only */
    .projectile {
      position: fixed; width: 8px; height: 8px; border-radius: 50%;
      background: black; left: 0; top: 0; transform: translate(-50%,-50%);
      transition: transform 1400ms cubic-bezier(.2,.7,.1,1); /* slower */
      pointer-events: none; z-index: 9999;
    }
    /* Full-screen cover we "cut a hole" into using a mask */
    .reveal-cover {
      position: fixed; inset: 0; background: white; z-index: 9998;
      --cx: 50vw; --cy: 50vh; --r: 0px;
      mask-image: radial-gradient(circle var(--r) at var(--cx) var(--cy),
                                  transparent 0, transparent calc(var(--r) + 0.1px),
                                  black calc(var(--r) + 0.2px));
      -webkit-mask-image: radial-gradient(circle var(--r) at var(--cx) var(--cy),
                                  transparent 0, transparent calc(var(--r) + 0.1px),
                                  black calc(var(--r) + 0.2px));
    }
        /* Wipe mask: center is opaque (white), outside is transparent */
    .wipe-cover {
    position: fixed; inset: 0; background: white; z-index: 9998;
    --cx: 50vw; --cy: 50vh; --r: 0px;
    mask-image: radial-gradient(circle var(--r) at var(--cx) var(--cy),
                                white 0, white calc(var(--r) + 0.1px),
                                transparent calc(var(--r) + 0.2px));
    -webkit-mask-image: radial-gradient(circle var(--r) at var(--cx) var(--cy),
                                white 0, white calc(var(--r) + 0.1px),
                                transparent calc(var(--r) + 0.2px));
    }

    /* Optional quick white flash on expand (subtle) */
    .flash {
      position: fixed; inset: 0; background: white; opacity: 0;
      animation: flash 700ms ease-out forwards; pointer-events: none; z-index: 9997;
    }
    @keyframes flash { 25% {opacity:.4} 100% {opacity:0} }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .projectile, .reveal-cover, .flash { display: none !important; }
    }
  </style>
</head>
<body>
  <!-- Container for consistent width -->
  <div id="container" style="max-width: 600px; margin: 0 auto;">

    <!-- Top navigation -->
    <table width="100%">
      <tr>
        <td align="left"><strong>Tejas Khare</strong></td>
        <td align="right" style="width: 200px;">
          <a class="fx" href="/projects/">Projects</a> &nbsp;
          <a class="fx" href="/journal/">Journal</a>
        </td>
      </tr>
    </table>

    <!-- Main text -->
    <div style="margin-top: 40px;">
      <p>
        Hi, I'm Tejas! I'm studying CS at Georgia Tech.
        <br><br>
        I focus on computer systems and machine learning, with the goal of making ML more efficient and ultimately more intelligent.
        <br><br>
        I will also be <a class="fx" href="/journal/">journal</a>ing my progress on my work and experiences. 
        <br><br>
        Check out my <a class="fx" href="/projects/">projects</a>!
        <br>
      </p>
    </div>

    <!-- Social links (gap, left-aligned) -->
    <div style="margin-top: 40px;">
      <a href="https://github.com/tkhare" target="_blank">Github</a>&nbsp;&nbsp;&nbsp;&nbsp;
      <a href="https://x.com/Tslice0" target="_blank">Twitter</a>
    </div>
  </div>

  <script>
    // --- Receiver: play reveal on page load if coming from another page ---
    (function onLoadReveal() {
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      const raw = sessionStorage.getItem('revealEntry');
      if (!raw) return;
      sessionStorage.removeItem('revealEntry');
      const { xPct, yPct, dur } = JSON.parse(raw);
      const cx = xPct * window.innerWidth;
      const cy = yPct * window.innerHeight;
  
      const cover = document.createElement('div');
      cover.className = 'reveal-cover';
      cover.style.setProperty('--cx', cx + 'px');
      cover.style.setProperty('--cy', cy + 'px');
      cover.style.setProperty('--r', '0px');
      document.body.appendChild(cover);
  
      const maxR = Math.hypot(window.innerWidth, window.innerHeight);
      animateReveal(cover, 0, maxR, dur || 700).then(() => cover.remove());
    })();
  
    // Utility: animate the expanding mask radius
    function animateReveal(cover, from, to, duration) {
      const start = performance.now();
      return new Promise(resolve => {
        function frame(now) {
          const t = Math.min(1, (now - start) / duration);
          const r = from + (to - from) * t;
          cover.style.setProperty('--r', r + 'px');
          if (t < 1) requestAnimationFrame(frame); else resolve();
        }
        requestAnimationFrame(frame);
      });
    }
  
    // --- Sender: handle clicks on internal links with animation + handoff ---
    document.addEventListener('click', function (e) {
      const a = e.target.closest('a.fx, a[href^="/"], a[href^="#"]');
      if (!a) return;
  
      // Respect reduced motion
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
  
      // Only plain left-click
      if (e.button !== 0 || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;
  
      const href = a.getAttribute('href') || '';
      const url = new URL(href, location.href);
      const isHash = href.startsWith('#');
      const isExternal = url.origin !== location.origin;
  
      // Let external links behave normally (and open in new tab if target set)
      if (isExternal || a.target === '_blank') return;
  
      e.preventDefault();
  
      // Projectile start (clicked link center)
      const rect = a.getBoundingClientRect();
      const startX = rect.left + rect.width / 2;
      const startY = rect.top + rect.height / 2;
  
      // Random on-screen impact point (keep within 15%..85% of viewport)
      const rand = (min, max) => min + Math.random() * (max - min);
      const endX = Math.round(window.innerWidth * rand(0.15, 0.85));
      const endY = Math.round(window.innerHeight * rand(0.15, 0.85));
  
      // Create projectile, fly slowly (1400ms)
      const p = document.createElement('div');
      p.className = 'projectile';
      document.body.appendChild(p);
      p.style.transform = `translate(${startX}px, ${startY}px)`;
      requestAnimationFrame(() => {
        p.style.transform = `translate(${endX}px, ${endY}px)`;
      });
  
      p.addEventListener('transitionend', async () => {
        p.remove();
  
        if (isHash) {
          // --- Same-page anchors: use cover to reveal after scrolling ---
          const cover = document.createElement('div');
          cover.className = 'reveal-cover';
          cover.style.setProperty('--cx', endX + 'px');
          cover.style.setProperty('--cy', endY + 'px');
          cover.style.setProperty('--r', '0px');
          document.body.appendChild(cover);
  
          const flash = document.createElement('div');
          flash.className = 'flash';
          document.body.appendChild(flash);
  
          const maxR = Math.hypot(window.innerWidth, window.innerHeight);
          const tgt = document.querySelector(href);
          if (tgt) {
            tgt.scrollIntoView({ block: 'start' });
            if (location.hash !== href) history.replaceState(null, '', href);
          }
          await animateReveal(cover, 0, maxR, 2000);
          cover.remove(); flash.remove();
          return;
        }
  
        // --- Cross-page internal links: wipe old page, then navigate ---
        const wipe = document.createElement('div');
        wipe.className = 'wipe-cover';
        wipe.style.setProperty('--cx', endX + 'px');
        wipe.style.setProperty('--cy', endY + 'px');
        wipe.style.setProperty('--r', '0px');
        document.body.appendChild(wipe);

        // Save impact point for receiver (normalized to viewport)
        sessionStorage.setItem('revealEntry', JSON.stringify({
        xPct: endX / window.innerWidth,
        yPct: endY / window.innerHeight,
        dur: 700
        }));

        const maxR = Math.hypot(window.innerWidth, window.innerHeight);
        await animateReveal(wipe, 0, maxR, 400);  // quick wipe to white
        window.location.href = url.href;          // navigate after wipe

      }, { once: true });
    });
  </script>
  
</body>
</html>
